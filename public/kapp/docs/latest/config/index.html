<!DOCTYPE html>
<!-- docs/baseof.html -->
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="icon" type="image/png" href="/img/favicon.png">
    
    
    <link rel="stylesheet" href="/css/style.css" integrity="" media="screen">
    <script src="/js/main.js" type="text/javascript"></script>
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /> 
  
    
      
      <meta name="robots" content="noindex">
    
    <title>Carvel - kapp - Configuration</title>
  </head>

  <body id="docs">
    

<header class="in-subproject">
	<div class="wrapper">
		<a href="/"><img class="image" src="/img/logo.svg" alt="Carvel Logo" /></a>
		<ul class="desktop-links">
			<li><a href="/" >Home</a></li>
			<li class="subprojects-in-primary-nav">
				<a href="/" onclick="return false;">Projects</a>
				<ul>
					
					
					<li><a href="/ytt/" >ytt</a></li>
					
					
					<li><a href="/kbld/" >kbld</a></li>
					
					
					<li><a href="/kapp/" >kapp</a></li>
					
					
					<li><a href="/imgpkg/" >imgpkg</a></li>
					
					
					<li><a href="https://github.com/vmware-tanzu/carvel-kapp-controller" >kapp-controller</a></li>
					
					
					<li><a href="/vendir/" >vendir</a></li>
					
				</ul>
			</li>
			<li><a href="/community/" >Community</a></li>
			<li><a href="/blog/" >Blog</a></li>
			<li><a href="https://kubernetes.slack.com/archives/CH8KCCKA5"><img src="/img/slack.png" />#carvel in Kubernetes Slack</a></li>
		</ul>
		<button type="button" class="mobile" onclick="mobileNavToggle()">
			<img class="collapsed-icon" src="/img/hamburger.svg" alt="Mobile nav icon">
			<img class="expanded-icon" src="/img/close.svg" alt="Mobile nav icon">
		</button>
		<div id="mobile-menu" class="mobile-menu mobile">
			<ul class="header-links">
				<li><a href="/" >Home</a></li>
				<li>
					<a href="/">Projects</a>
					<ul>
						
						
						<li><a href="/ytt/" >ytt</a></li>
						
						
						<li><a href="/kbld/" >kbld</a></li>
						
						
						<li><a href="/kapp/" >kapp</a></li>
						
						
						<li><a href="/imgpkg/" >imgpkg</a></li>
						
						
						<li><a href="https://github.com/vmware-tanzu/carvel-kapp-controller" >kapp-controller</a></li>
						
						
						<li><a href="/vendir/" >vendir</a></li>
						
					</ul>
				</li>
				<li><a href="/community/" >Community</a></li>
				<li><a href="/blog/" >Blog</a></li>
			</ul>
			<div class="social">
				<a href="https://github.com/vmware-tanzu/carvel.dev"><img src="/img/github.svg" />GitHub</a>
				<a href="https://kubernetes.slack.com/archives/CH8KCCKA5"><img src="/img/slack.png" />#carvel in Kubernetes Slack</a>
			</div>
		</div>
	</div>
</header>



<header class="subproject-specific">
	<div class="wrapper">
		<a href="/kapp/" class="text-logo">kapp</a>
		<ul class="desktop-links">
			<li><a href="/kapp/" >kapp Overview</a></li>
			<li><a href="/kapp/docs/latest/" >Documentation</a></li>
			<li><a href="https://github.com/vmware-tanzu/carvel-kapp"><img src="/img/github.svg" />GitHub</a></li>
		</ul>
		<ul class="mobile-links mobile">
			<li><a href="/kapp/docs/latest/" >Docs</a></li>
			<li><a href="https://github.com/vmware-tanzu/carvel-kapp"><img src="/img/github.svg" />GitHub</a></li>
		</ul>
	</div>
</header>


    <main>
      <div class="wrapper dedicated-page docs clearfix">
        <div class="side-nav">
          
<div class="dropdown">
    
        <span>latest</span>
    
</div>

          
    
    <form class="d-flex align-items-center">
        <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
        <input type="search" class="form-control docsearch-input" id="search-input" placeholder="Search..."
                aria-label="Search for..." autocomplete="off" spellcheck="false" role="combobox"
                aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0"
                dir="auto" style="position: relative; vertical-align: top;">
        </span>
    </form>

          <nav class="navigation">
  
  
  
  
    
    
    
    

    
      <h3>Introduction</h3>
      <ul>
        
          <li>
            
              
              <a href="/kapp/docs/latest/" >About kapp</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp/docs/latest/apps/" >Applications</a>
            
          </li>
        
      </ul>
    
      <h3>Deploy command</h3>
      <ul>
        
          <li>
            
              
              <a href="/kapp/docs/latest/diff/" >Diff stage</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp/docs/latest/apply/" >Apply stage</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp/docs/latest/apply-ordering/" >Apply Ordering</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp/docs/latest/apply-waiting/" >Apply Waiting</a>
            
          </li>
        
      </ul>
    
      <h3>Reference</h3>
      <ul>
        
          <li>
            
              
              <a href="/kapp/docs/latest/config/" class="active">Configuration</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp/docs/latest/rbac/" >Permissions</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp/docs/latest/state-namespace/" >Namespace for State Storage</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp/docs/latest/cheatsheet/" >Cheatsheet</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp/docs/latest/dangerous-flags/" >Dangerous Flags</a>
            
          </li>
        
      </ul>
    
      <h3>Integrations</h3>
      <ul>
        
          <li>
            
              
              <a href="/kapp/docs/latest/integrating-with-other-tools/" >Integrating With Other Tools</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp/docs/latest/gitops/" >GitOps</a>
            
          </li>
        
      </ul>
    
      <h3>FAQ</h3>
      <ul>
        
          <li>
            
              
              <a href="/kapp/docs/latest/faq/" >FAQ</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp/docs/latest/merge-method/" >Resource Merge Method</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp/docs/latest/security/" >Security</a>
            
          </li>
        
      </ul>
    
  
</nav>

        </div>
        <div class="docs-content text-content">
          

	


          <div class="documentation-container">
            <h1>Configuration</h1>
            
                <aside>
                <nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#format">Format</a>
      <ul>
        <li><a href="#minimumrequiredversion">minimumRequiredVersion</a></li>
        <li><a href="#rebaserules">rebaseRules</a></li>
        <li><a href="#ownershiplabelrules">ownershipLabelRules</a></li>
        <li><a href="#labelscopingrules">labelScopingRules</a></li>
        <li><a href="#waitrules">waitRules</a></li>
        <li><a href="#templaterules">templateRules</a></li>
        <li><a href="#additionallabels">additionalLabels</a></li>
        <li><a href="#diffagainstlastappliedfieldexclusionrules">diffAgainstLastAppliedFieldExclusionRules</a></li>
        <li><a href="#diffmaskrules">diffMaskRules</a></li>
        <li><a href="#changegroupbindings">changeGroupBindings</a></li>
        <li><a href="#changerulebindings">changeRuleBindings</a></li>
      </ul>
    </li>
    <li><a href="#resource-matchers">Resource matchers</a>
      <ul>
        <li><a href="#allmatcher">allMatcher</a></li>
        <li><a href="#anymatcher">anyMatcher</a></li>
        <li><a href="#notmatcher">notMatcher</a></li>
        <li><a href="#andmatcher">andMatcher</a></li>
        <li><a href="#apigroupkindmatcher">apiGroupKindMatcher</a></li>
        <li><a href="#apiversionkindmatcher">apiVersionKindMatcher</a></li>
        <li><a href="#kindnamespacenamematcher">kindNamespaceNameMatcher</a></li>
        <li><a href="#hasannotationmatcher">hasAnnotationMatcher</a></li>
        <li><a href="#hasnamespacematcher">hasNamespaceMatcher</a></li>
        <li><a href="#customresourcematcher">customResourceMatcher</a></li>
        <li><a href="#emptyfieldmatcher">emptyFieldMatcher</a></li>
      </ul>
    </li>
    <li><a href="#paths">Paths</a></li>
    <li><a href="#config-wrapped-in-configmap">Config wrapped in ConfigMap</a></li>
  </ul>
</nav>
                </aside>
            

            <h2 id="overview">Overview <a href="#overview" class="section-link">¶</a></h2><p>kapp supports custom <code>Config</code> resource to specify its own configuration. It&rsquo;s expected to be included with your other Kubernetes configuration. Config resource is never applied to the cluster, though it follows general Kubernetes resource format. Multiple config resources are allowed.</p>
<p>kapp comes with <strong>built-in configuration</strong> (see it via <code>kapp deploy-config</code>) that includes rules for common resources.</p>
<h2 id="format">Format <a href="#format" class="section-link">¶</a></h2><div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">apiVersion</span>:<span style="color:#bbb"> </span>kapp.k14s.io/v1alpha1<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">kind</span>:<span style="color:#bbb"> </span>Config<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">minimumRequiredVersion</span>:<span style="color:#bbb"> </span><span style="color:#099">0.23.0</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">rebaseRules</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#000080">path</span>:<span style="color:#bbb"> </span>[spec, clusterIP]<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">type</span>:<span style="color:#bbb"> </span>copy<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">sources</span>:<span style="color:#bbb"> </span>[new, existing]<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: v1, kind</span>:<span style="color:#bbb"> </span>Service}<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">ownershipLabelRules</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#000080">path</span>:<span style="color:#bbb"> </span>[metadata, labels]<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">allMatcher</span>:<span style="color:#bbb"> </span>{}<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">labelScopingRules</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#000080">path</span>:<span style="color:#bbb"> </span>[spec, selector]<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: v1, kind</span>:<span style="color:#bbb"> </span>Service}<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">templateRules</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: v1, kind</span>:<span style="color:#bbb"> </span>ConfigMap}<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">affectedResources</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">objectReferences</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>- <span style="color:#000080">path</span>:<span style="color:#bbb"> </span>[spec, template, spec, containers, {allIndexes: true}, env, {allIndexes: true}, valueFrom, configMapKeyRef]<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: apps/v1, kind</span>:<span style="color:#bbb"> </span>Deployment}<span style="color:#bbb">
</span><span style="color:#bbb">    </span>- <span style="color:#000080">path</span>:<span style="color:#bbb"> </span>[spec, template, spec, containers, {allIndexes: true}, envFrom, {allIndexes: true}, configMapRef]<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: apps/v1, kind</span>:<span style="color:#bbb"> </span>Deployment}<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">additionalLabels</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">department</span>:<span style="color:#bbb"> </span>marketing<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">cost-center</span>:<span style="color:#bbb"> </span>mar201<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">diffAgainstLastAppliedFieldExclusionRules</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#000080">path</span>:<span style="color:#bbb"> </span>[metadata, annotations, &#34;deployment.kubernetes.io/revision&#34;]<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: apps/v1, kind</span>:<span style="color:#bbb"> </span>Deployment}<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">diffMaskRules</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#000080">path</span>:<span style="color:#bbb"> </span>[data]<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: v1, kind</span>:<span style="color:#bbb"> </span>Secret}<span style="color:#bbb">
</span></code></pre></div><h3 id="minimumrequiredversion">minimumRequiredVersion <a href="#minimumrequiredversion" class="section-link">¶</a></h3><p><code>minimumRequiredVersion</code> forces kapp to exit with a validation error if kapp&rsquo;s version is below minimum required version. Available in v0.23.0+.</p>
<h3 id="rebaserules">rebaseRules <a href="#rebaserules" class="section-link">¶</a></h3><p><code>rebaseRules</code> specify origin of field values.</p>
<p>kapp rebase rules explicitly define how to merge resources during an update. To read more about why rebase rules are necessary, see <a href="/kapp/docs/latest/merge-method/">Resource Merge Method</a>.
For examples of rebase rules in use, see <a href="/kapp/docs/latest/hpa-deployment-rebase/">HPA and Deployment rebase</a> or <a href="/kapp/docs/latest/rebase-pvc/">PersistentVolumeClaim rebase</a>.</p>
<ul>
<li><code>rebaseRules</code> (array) list of rebase rules
<ul>
<li><code>path</code> (array of strings) specifies location within a resource to rebase. Mutually exclusive with <code>paths</code>. Example: <code>[spec, clusterIP]</code></li>
<li><code>paths</code> (array of <code>path</code>) specifies multiple locations within a resource to rebase. This is a convenience for specifying multiple rebase rules with only different paths. Mutually exclusive with <code>path</code>. Available in v0.27.0+.</li>
<li><code>type</code> (string) specifies strategy to modify field values. Allowed values: <code>copy</code> or <code>remove</code>. <code>copy</code> will update the field value; <code>remove</code> will delete the field.</li>
<li><code>sources</code> (array of <code>new</code> or <code>existing</code>) specifies a preference order for the source of the referenced field value being rebased. <code>new</code> refers to an updated resource from user input, where <code>existing</code> refers to a resource already in the cluster. If the field value being rebased is not found in any of the sources provided, kapp will error. Only used with <code>type: copy</code>.<br>
Examples:
<ul>
<li><code>[existing, new]</code> – If field value is present in the <code>existing</code> resource on cluster, use that value, otherwise use the value in the <code>new</code> user input.</li>
<li><code>[existing]</code> – Only look for field values in resources already on cluster, corresponding value you provide in new resource will be overwritten.</li>
</ul>
</li>
<li><code>resourceMatchers</code> (array) specifies rules to find matching resources. See various resource matchers below.</li>
</ul>
</li>
</ul>
<p>Rebase rule to <code>copy</code> the <code>clusterIP</code> field value to <code>Service</code>/<code>v1</code> resources; if <code>clusterIp</code> is present in the <code>new</code> user input, use that value, otherwise use the value in <code>existing</code> resource on cluster:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">rebaseRules</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#000080">path</span>:<span style="color:#bbb"> </span>[spec, clusterIP]<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">type</span>:<span style="color:#bbb"> </span>copy<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">sources</span>:<span style="color:#bbb"> </span>[new, existing]<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: v1, kind</span>:<span style="color:#bbb"> </span>Service}<span style="color:#bbb">
</span></code></pre></div><p>Rebase rule to <code>copy</code> the <code>clusterIP</code> and <code>healthCheckNodePort</code> field values from the <code>existing</code> resource on cluster, to <code>Service</code>/<code>v1</code> resources:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">rebaseRules</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#000080">paths</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- [spec, clusterIP]<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- [spec, healthCheckNodePort]<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">type</span>:<span style="color:#bbb"> </span>copy<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">sources</span>:<span style="color:#bbb"> </span>[existing]<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: v1, kind</span>:<span style="color:#bbb"> </span>Service}<span style="color:#bbb">
</span></code></pre></div><h3 id="ownershiplabelrules">ownershipLabelRules <a href="#ownershiplabelrules" class="section-link">¶</a></h3><p><code>ownershipLabelRules</code> specify locations for inserting kapp generated labels. These labels allow kapp to track which resources belong to which application. For resources that describe creation of other resources (e.g. <code>Deployment</code> or <code>StatefulSet</code>), configuration may need to specify where to insert labels for child resources that will be created. <code>kapp.k14s.io/disable-default-ownership-label-rules: &quot;&quot;</code> (value must be empty) annotation can be be used to exclude an individual resource from default onwership label rules.</p>
<h3 id="labelscopingrules">labelScopingRules <a href="#labelscopingrules" class="section-link">¶</a></h3><p><code>labelScopingRules</code> specify locations for inserting kapp generated labels that scope resources to resources within current application. <code>kapp.k14s.io/disable-default-label-scoping-rules: &quot;&quot;</code> (as of v0.33.0+, or use <code>kapp.k14s.io/disable-label-scoping: &quot;&quot;</code> in earlier versions) annotation can be used to exclude an individual resource from label scoping.</p>
<h3 id="waitrules">waitRules <a href="#waitrules" class="section-link">¶</a></h3><p>Available in v0.29.0+.</p>
<p><code>waitRules</code> specify how to wait for resources that kapp does not wait for by default. Each rule provides a way to specify which <code>status.conditions</code> indicate success or failure. Once any of the condition matchers successfully match against one of the resource&rsquo;s conditions, kapp will stop waiting for the matched resource and report any failures. (If this functionality is not enough to wait for resources in your use case, please reach out on Slack to discuss further.)</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">waitRules</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#000080">supportsObservedGeneration</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">conditionMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">type</span>:<span style="color:#bbb"> </span>Failed<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">status</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;True&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">failure</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">type</span>:<span style="color:#bbb"> </span>Deployed<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">status</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;True&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">success</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: corp.com/v1, kind</span>:<span style="color:#bbb"> </span>DatabaseInstance}<span style="color:#bbb">
</span></code></pre></div><div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">waitRules</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#000080">supportsObservedGeneration</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">conditionMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">type</span>:<span style="color:#bbb"> </span>Ready<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">status</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;False&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">failure</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">type</span>:<span style="color:#bbb"> </span>Ready<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">status</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;True&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">success</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">resourceMatchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: corp.com/v1, kind</span>:<span style="color:#bbb"> </span>Application}<span style="color:#bbb">
</span></code></pre></div><h3 id="templaterules">templateRules <a href="#templaterules" class="section-link">¶</a></h3><p><code>templateRules</code> specify how versioned resources affect other resources. In above example, versioned config maps are said to affect deployments. <a href="/kapp/docs/latest/diff/#versioned-resources">Read more about versioned resources</a>.</p>
<h3 id="additionallabels">additionalLabels <a href="#additionallabels" class="section-link">¶</a></h3><p><code>additionalLabels</code> specify additional labels to apply to all resources for custom uses by the user (added based on <code>ownershipLabelRules</code>).</p>
<h3 id="diffagainstlastappliedfieldexclusionrules">diffAgainstLastAppliedFieldExclusionRules <a href="#diffagainstlastappliedfieldexclusionrules" class="section-link">¶</a></h3><p><code>diffAgainstLastAppliedFieldExclusionRules</code> specify which fields should be removed before diff-ing against last applied resource. These rules are useful for fields are &ldquo;owned&rdquo; by the cluster/controllers, and are only later updated. For example <code>Deployment</code> resource has an annotation that gets set after a little bit of time after resource is created/updated (not during resource admission). It&rsquo;s typically not necessary to use this configuration.</p>
<h3 id="diffmaskrules">diffMaskRules <a href="#diffmaskrules" class="section-link">¶</a></h3><p><code>diffMaskRules</code> specify which field values should be masked in diff. By default <code>v1/Secret</code>&rsquo;s <code>data</code> fields are masked. Currently only applied to <code>deploy</code> command.</p>
<h3 id="changegroupbindings">changeGroupBindings <a href="#changegroupbindings" class="section-link">¶</a></h3><p>Available in v0.25.0+.</p>
<p><code>changeGroupBindings</code> bind specified change group to resources matched by resource matchers. This is an alternative to using <code>kapp.k14s.io/change-group</code> annotation to add change group to resources. See <code>kapp deploy-config</code> for default bindings.</p>
<h3 id="changerulebindings">changeRuleBindings <a href="#changerulebindings" class="section-link">¶</a></h3><p>Available in v0.25.0+.</p>
<p><code>changeRuleBindings</code> bind specified change rules to resources matched by resource matchers. This is an alternative to using <code>kapp.k14s.io/change-rule</code> annotation to add change rules to resources. See <code>kapp deploy-config</code> for default bindings.</p>
<hr>
<h2 id="resource-matchers">Resource matchers <a href="#resource-matchers" class="section-link">¶</a></h2><p>Resource matchers (as used by <code>rebaseRules</code>, <code>ownershipLabelRules</code>, <code>labelScopingRules</code>, <code>templateRules</code>, <code>diffAgainstLastAppliedFieldExclusionRules</code>, and <code>diffMaskRules</code>):</p>
<h3 id="allmatcher">allMatcher <a href="#allmatcher" class="section-link">¶</a></h3><p>Matches all resources</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">allMatcher</span>:<span style="color:#bbb"> </span>{}<span style="color:#bbb">
</span></code></pre></div><h3 id="anymatcher">anyMatcher <a href="#anymatcher" class="section-link">¶</a></h3><p>Matches resources that match one of matchers</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">anyMatcher</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">matchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: apps/v1, kind</span>:<span style="color:#bbb"> </span>Deployment}<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: extensions/v1alpha1, kind</span>:<span style="color:#bbb"> </span>Deployment}<span style="color:#bbb">
</span></code></pre></div><h3 id="notmatcher">notMatcher <a href="#notmatcher" class="section-link">¶</a></h3><p>Matches any resource that does not match given matcher</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">notMatcher</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">matcher</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: apps/v1, kind</span>:<span style="color:#bbb"> </span>Deployment}<span style="color:#bbb">
</span></code></pre></div><h3 id="andmatcher">andMatcher <a href="#andmatcher" class="section-link">¶</a></h3><p>Matches any resource that matches all given matchers</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">andMatcher</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">matchers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: apps/v1, kind</span>:<span style="color:#bbb"> </span>Deployment}<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">hasNamespaceMatcher</span>:<span style="color:#bbb"> </span>{}<span style="color:#bbb">
</span></code></pre></div><h3 id="apigroupkindmatcher">apiGroupKindMatcher <a href="#apigroupkindmatcher" class="section-link">¶</a></h3><div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiGroup: apps, kind</span>:<span style="color:#bbb"> </span>Deployment}<span style="color:#bbb">
</span></code></pre></div><h3 id="apiversionkindmatcher">apiVersionKindMatcher <a href="#apiversionkindmatcher" class="section-link">¶</a></h3><div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">apiVersionKindMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">apiVersion: apps/v1, kind</span>:<span style="color:#bbb"> </span>Deployment}<span style="color:#bbb">
</span></code></pre></div><h3 id="kindnamespacenamematcher">kindNamespaceNameMatcher <a href="#kindnamespacenamematcher" class="section-link">¶</a></h3><div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">kindNamespaceNameMatcher</span>:<span style="color:#bbb"> </span>{<span style="color:#000080">kind: Deployment, namespace: mysql, name</span>:<span style="color:#bbb"> </span>mysql}<span style="color:#bbb">
</span></code></pre></div><h3 id="hasannotationmatcher">hasAnnotationMatcher <a href="#hasannotationmatcher" class="section-link">¶</a></h3><p>Matches resources that have particular annotation</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">hasAnnotationMatcher</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">keys</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- kapp.k14s.io/change-group<span style="color:#bbb">
</span></code></pre></div><h3 id="hasnamespacematcher">hasNamespaceMatcher <a href="#hasnamespacematcher" class="section-link">¶</a></h3><p>Matches any resource that has a non-empty namespace</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">hasNamespaceMatcher</span>:<span style="color:#bbb"> </span>{}<span style="color:#bbb">
</span></code></pre></div><p>Matches any resource with namespace that equals to one of the specified names</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">hasNamespaceMatcher</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">names</span>:<span style="color:#bbb"> </span>[app1, app2]<span style="color:#bbb">
</span></code></pre></div><h3 id="customresourcematcher">customResourceMatcher <a href="#customresourcematcher" class="section-link">¶</a></h3><p>Matches any resource that is not part of builtin k8s API groups (e.g. apps, batch, etc.). It&rsquo;s likely that over time some builtin k8s resources would not be matched.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">customResourceMatcher</span>:<span style="color:#bbb"> </span>{}<span style="color:#bbb">
</span></code></pre></div><h3 id="emptyfieldmatcher">emptyFieldMatcher <a href="#emptyfieldmatcher" class="section-link">¶</a></h3><p>Available in v0.34.0+.</p>
<p>Matches any resource that has empty specified field</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">emptyFieldMatcher</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">path</span>:<span style="color:#bbb"> </span>[aggregationRule]<span style="color:#bbb">
</span></code></pre></div><hr>
<h2 id="paths">Paths <a href="#paths" class="section-link">¶</a></h2><p>Path specifies location within a resource (as used <code>rebaseRules</code> and <code>ownershipLabelRules</code>):</p>
<pre><code>[spec, clusterIP]
</code></pre><pre><code>[spec, volumeClaimTemplates, {allIndexes: true}, metadata, labels]
</code></pre><pre><code>[spec, volumeClaimTemplates, {index: 0}, metadata, labels]
</code></pre><hr>
<h2 id="config-wrapped-in-configmap">Config wrapped in ConfigMap <a href="#config-wrapped-in-configmap" class="section-link">¶</a></h2><p>Available of v0.34.0+.</p>
<p>Config resource could be wrapped in a ConfigMap to support same deployment configuration by tools that do not understand kapp&rsquo;s <code>Config</code> resource directly. ConfigMap carrying kapp config must to be labeled with <code>kapp.k14s.io/config</code> and have <code>config.yml</code> data key. Such config maps will be applied to the cluster, unlike config given as <code>Config</code> resource.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">apiVersion</span>:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">kind</span>:<span style="color:#bbb"> </span>ConfigMap<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">metadata</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">name</span>:<span style="color:#bbb"> </span>my-kapp-config<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">labels</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">kapp.k14s.io/config</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">data</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">config.yml</span>:<span style="color:#bbb"> </span>|<span style="color:#d14">
</span><span style="color:#d14">    apiVersion: kapp.k14s.io/v1alpha1
</span><span style="color:#d14">    kind: Config
</span><span style="color:#d14">    rebaseRules:
</span><span style="color:#d14">    - path: [rules]
</span><span style="color:#d14">      type: copy
</span><span style="color:#d14">      sources: [existing, new]
</span><span style="color:#d14">      resourceMatchers:
</span><span style="color:#d14">      - notMatcher:
</span><span style="color:#d14">          matcher:
</span><span style="color:#d14">            emptyFieldMatcher:
</span><span style="color:#d14">              path: [aggregationRule]</span><span style="color:#bbb">    
</span></code></pre></div><p>NOTE: <code>kapp</code> is <em>only</em> affected by a <code>Config</code> (whether wrapped in a <code>ConfigMap</code> or not) when supplied as a direct input (i.e. as a <code>-f</code> argument). Any <code>ConfigMap</code> containing a <code>Config</code> is already present in the target cluster has <em>no affect whatsoever</em> on <code>kapp</code>&rsquo;s behavior.</p>

          </div>
        </div>
      </div>
    </main>
    <footer>
	<div class="wrapper footer-links">
		<div class="clearfix">
			<ul class="left-links">
				<li><a href="https://twitter.com/carvel_dev"><img src="/img/twitter.png" />Twitter</a></li>
				<li><a href="https://github.com/vmware-tanzu/carvel.dev"><img src="/img/github.svg" />Github</a></li>
				<li><a href="https://kubernetes.slack.com/archives/CH8KCCKA5">
					<img src="/img/slack.png" />
					<span class="desktop">#carvel in Kubernetes Slack</span>
					<span class="mobile">Slack</span>
				</a></li>
			</ul>
			<div class="right-links">
				<a href="/"> <img src="/img/logo.svg" /></a>
			</div>
		</div>
		<div class="bottom-links">
			<p class="copywrite">&copy; 2021 Carvel Authors. <a href="http://vmware.github.io/">A VMware-backed project. <img src="/img/vm-logo.svg" /></a></p>
		</div>
	</div>
</footer>

    
    
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
      <script type="text/javascript">
        docsearch({
          apiKey: '582b1408d7a3fe145c0f84f48ca03755',
          indexName: 'carvel',
          inputSelector: '.docsearch-input',
          algoliaOptions: {'facetFilters': ["tags:kapp"], hitsPerPage: 9},
          debug: false 
        });
      </script>
    
  </body>
</html>
