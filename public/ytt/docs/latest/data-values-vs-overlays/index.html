<!DOCTYPE html>
<!-- docs/baseof.html -->
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="icon" type="image/png" href="/img/favicon.png">
    
    
    <link rel="stylesheet" href="/css/style.css" integrity="" media="screen">
    <script src="/js/main.js" type="text/javascript"></script>
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /> 
  
    
      
      <meta name="robots" content="noindex">
    
    <title>Carvel - ytt - Data Values vs Overlays</title>
  </head>

  <body id="docs">
    

<header class="in-subproject">
	<div class="wrapper">
		<a href="/"><img class="image" src="/img/logo.svg" alt="Carvel Logo" /></a>
		<ul class="desktop-links">
			<li><a href="/" >Home</a></li>
			<li class="subprojects-in-primary-nav">
				<a href="/" onclick="return false;">Projects</a>
				<ul>
					
					
					<li><a href="/ytt/" >ytt</a></li>
					
					
					<li><a href="/kbld/" >kbld</a></li>
					
					
					<li><a href="/kapp/" >kapp</a></li>
					
					
					<li><a href="/imgpkg/" >imgpkg</a></li>
					
					
					<li><a href="https://github.com/vmware-tanzu/carvel-kapp-controller" >kapp-controller</a></li>
					
					
					<li><a href="/vendir/" >vendir</a></li>
					
				</ul>
			</li>
			<li><a href="/community/" >Community</a></li>
			<li><a href="/blog/" >Blog</a></li>
			<li><a href="https://kubernetes.slack.com/archives/CH8KCCKA5"><img src="/img/slack.png" />#carvel in Kubernetes Slack</a></li>
		</ul>
		<button type="button" class="mobile" onclick="mobileNavToggle()">
			<img class="collapsed-icon" src="/img/hamburger.svg" alt="Mobile nav icon">
			<img class="expanded-icon" src="/img/close.svg" alt="Mobile nav icon">
		</button>
		<div id="mobile-menu" class="mobile-menu mobile">
			<ul class="header-links">
				<li><a href="/" >Home</a></li>
				<li>
					<a href="/">Projects</a>
					<ul>
						
						
						<li><a href="/ytt/" >ytt</a></li>
						
						
						<li><a href="/kbld/" >kbld</a></li>
						
						
						<li><a href="/kapp/" >kapp</a></li>
						
						
						<li><a href="/imgpkg/" >imgpkg</a></li>
						
						
						<li><a href="https://github.com/vmware-tanzu/carvel-kapp-controller" >kapp-controller</a></li>
						
						
						<li><a href="/vendir/" >vendir</a></li>
						
					</ul>
				</li>
				<li><a href="/community/" >Community</a></li>
				<li><a href="/blog/" >Blog</a></li>
			</ul>
			<div class="social">
				<a href="https://github.com/vmware-tanzu/carvel.dev"><img src="/img/github.svg" />GitHub</a>
				<a href="https://kubernetes.slack.com/archives/CH8KCCKA5"><img src="/img/slack.png" />#carvel in Kubernetes Slack</a>
			</div>
		</div>
	</div>
</header>



<header class="subproject-specific">
	<div class="wrapper">
		<a href="/ytt/" class="text-logo">ytt</a>
		<ul class="desktop-links">
			<li><a href="/ytt/" >ytt Overview</a></li>
			<li><a href="/ytt/docs/latest/" >Documentation</a></li>
			<li><a href="https://github.com/vmware-tanzu/carvel-ytt"><img src="/img/github.svg" />GitHub</a></li>
		</ul>
		<ul class="mobile-links mobile">
			<li><a href="/ytt/docs/latest/" >Docs</a></li>
			<li><a href="https://github.com/vmware-tanzu/carvel-ytt"><img src="/img/github.svg" />GitHub</a></li>
		</ul>
	</div>
</header>


    <main>
      <div class="wrapper dedicated-page docs clearfix">
        <div class="side-nav">
          
<div class="dropdown">
    
        <span>latest</span>
    
</div>

          
    
    <form class="d-flex align-items-center">
        <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
        <input type="search" class="form-control docsearch-input" id="search-input" placeholder="Search..."
                aria-label="Search for..." autocomplete="off" spellcheck="false" role="combobox"
                aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0"
                dir="auto" style="position: relative; vertical-align: top;">
        </span>
    </form>

          <nav class="navigation">
  
  
  
  
    
    
    
    

    
      <h3>Introduction</h3>
      <ul>
        
          <li>
            
              
              <a href="/ytt/docs/latest/" >About ytt</a>
            
          </li>
        
      </ul>
    
      <h3>Techniques</h3>
      <ul>
        
          <li>
            
              
              <a href="/ytt/docs/latest/ytt-data-values/" >Using data values</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/data-values-vs-overlays/" class="active">Data values vs overlays</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/injecting-secrets/" >Injecting secrets</a>
            
          </li>
        
      </ul>
    
      <h3>Reference</h3>
      <ul>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang/" >Language</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-annotation/" >Annotations</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/ytt-text-templating/" >Text Templating</a>
            
          </li>
        
      </ul>
    
      <h3>Built-in @ytt library</h3>
      <ul>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-ytt/" >All modules</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-ytt-struct/" >Struct module</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-ytt-overlay/" >Overlay module</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-ytt-library/" >Library module</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-ytt-version/" >Version module</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-ytt-template/" >Template module</a>
            
          </li>
        
      </ul>
    
      <h3>Language</h3>
      <ul>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang/" >General</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-string/" >String</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-list/" >List</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-dict/" >Dictionary</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-structs/" >Struct</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-yaml-fragment/" >YAML Fragment</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-if/" >If conditional</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-for/" >For loop</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-def/" >Function</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/lang-ref-load/" >Load</a>
            
          </li>
        
      </ul>
    
      <h3>CLI configuration</h3>
      <ul>
        
          <li>
            
              
              <a href="/ytt/docs/latest/outputs/" >Outputs</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/file-marks/" >File Marks</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/strict/" >Strict yaml</a>
            
          </li>
        
      </ul>
    
      <h3>FAQ</h3>
      <ul>
        
          <li>
            
              
              <a href="/ytt/docs/latest/faq/" >FAQ</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/ytt-vs-x/" >Why ytt vs. x?</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/security/" >Security</a>
            
          </li>
        
          <li>
            
              
              <a href="/ytt/docs/latest/known-limitations/" >Known Limitations</a>
            
          </li>
        
      </ul>
    
  
</nav>

        </div>
        <div class="docs-content text-content">
          

	


          <div class="documentation-container">
            <h1>Data Values vs Overlays</h1>
            
                <aside>
                <nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#data-values">Data Values</a></li>
    <li><a href="#overlays">Overlays</a></li>
  </ul>
</nav>
                </aside>
            

            <h2 id="overview">Overview <a href="#overview" class="section-link">Â¶</a></h2><p>As folks get started with <code>ytt</code>, a common question that arises is, âwhen should
I use data values versus overlays?â While these features do address a similar
problem space, we recommend using one feature versus the other depending on the
use case. We will detail our guidance below.</p>
<h2 id="data-values">Data Values <a href="#data-values" class="section-link">Â¶</a></h2><p><a href="/ytt/docs/latest/ytt-data-values/">Data values</a> provide a way to inject input data into a
template. If you think about a ytt template as a function, then data values are
the varying parameters. The configuration author will expose values that are
likely to change often, such as with every new environment, as data values.
Authors can also set data values to reasonable defaults or leave them empty and
require the consumers to input their own.</p>
<p>Common use cases:</p>
<ol>
<li>Set default values (for generic or specific use-cases)</li>
<li>Provide visibility to values that could be updated by the consumer</li>
<li>Enable simple conditional behavior (such as requiring a value to be set)</li>
</ol>
<p>Consider this simple example provided by the configuration author:</p>
<p><code>config.yml</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#998;font-style:italic">#@ load(&#34;@ytt:data&#34;, &#34;data&#34;)</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#@ load(&#34;@ytt:assert&#34;, &#34;assert&#34;)</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#555">---</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">apiVersion</span>:<span style="color:#bbb"> </span>apps/v1<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">kind</span>:<span style="color:#bbb"> </span>Deployment<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">metadata</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">name</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">#@ data.values.deployment_name or assert.fail(&#34;missing deployment_name&#34;)</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">labels</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">app</span>:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">replicas</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">#@ data.values.replicas</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">selector</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">matchLabels</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">app</span>:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">template</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">metadata</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">labels</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000080">app</span>:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">containers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#000080">name</span>:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000080">image</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">#@ data.values.nginx_image</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000080">ports</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- <span style="color:#000080">containerPort</span>:<span style="color:#bbb"> </span><span style="color:#099">80</span><span style="color:#bbb">
</span></code></pre></div><p><code>values.yml</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#998;font-style:italic">#@data/values</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#555">---</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">deployment_name</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">replicas</span>:<span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">nginx_image</span>:<span style="color:#bbb"> </span>nginx:1.14.2<span style="color:#bbb">
</span></code></pre></div><p>The configuration consumer can provide their own data values files that override the ones
provided.</p>
<p>This example portrays how to:</p>
<ol>
<li>Set default values. The configuration author has set appropriate default
values for <code>replicas</code> and <code>nginx_image</code>.</li>
<li>Provide visibility to values that could be updated by the consumer.
<code>deployment_name</code>, <code>replicas</code>, and <code>nginx_image</code> are all configurable by the
consumer.</li>
<li>Enable simple conditional behavior. <code>deployment_name</code> must be set by the
consumer, otherwise an error will be returned.</li>
</ol>
<p>Pros:</p>
<ul>
<li>Simple (easy to use, easy to understand)</li>
</ul>
<p>Cons:</p>
<ul>
<li>Limited in capability (by design)</li>
</ul>
<hr>
<h2 id="overlays">Overlays <a href="#overlays" class="section-link">Â¶</a></h2><p>When consumers would like to configure fields beyond what the original
author has exposed as data values, they should turn to
<a href="/ytt/docs/latest/lang-ref-ytt-overlay/">Overlays</a>. These documents provide a way to specify
locations within configuration and either add to, remove from, or replace within
that existing configuration.  With basic usage, overlays can act as an extension
of data values, but as situations inevitably become more complex, overlays
provide many more capabilities.</p>
<p>Common use cases:</p>
<ol>
<li>To replace, delete, or append configuration</li>
<li>Situation-specific values</li>
</ol>
<p>Consider this extension of our previous example:</p>
<p><code>config.yml</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#998;font-style:italic">#@ load(&#34;@ytt:data&#34;, &#34;data&#34;)</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#@ load(&#34;@ytt:assert&#34;, &#34;assert&#34;)</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#555">---</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">apiVersion</span>:<span style="color:#bbb"> </span>apps/v1<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">kind</span>:<span style="color:#bbb"> </span>Deployment<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">metadata</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">name</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">#@ data.values.deployment_name or assert.fail(&#34;missing deployment_name&#34;)</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">labels</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">app</span>:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">replicas</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">#@ data.values.replicas</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">selector</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">matchLabels</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">app</span>:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">template</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">metadata</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">labels</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000080">app</span>:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">containers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#000080">name</span>:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000080">image</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">#@ data.values.nginx_image</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000080">ports</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- <span style="color:#000080">containerPort</span>:<span style="color:#bbb"> </span><span style="color:#099">80</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#000080">name</span>:<span style="color:#bbb"> </span>to-be-removed<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000080">image</span>:<span style="color:#bbb"> </span>image:1.2.3<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000080">ports</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- <span style="color:#000080">containerPort</span>:<span style="color:#bbb"> </span><span style="color:#099">80</span><span style="color:#bbb">
</span></code></pre></div><p><code>values.yml</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#998;font-style:italic">#@data/values</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#555">---</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">deployment_name</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">replicas</span>:<span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">nginx_image</span>:<span style="color:#bbb"> </span>nginx:1.14.2<span style="color:#bbb">
</span></code></pre></div><p><code>add-namespace.yml</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#998;font-style:italic">#@ load(&#34;@ytt:overlay&#34;, &#34;overlay&#34;)</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#@overlay/match by=overlay.all, expects=&#34;1+&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#555">---</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">metadata</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">#@overlay/match missing_ok=True</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">namespace</span>:<span style="color:#bbb"> </span>my-namespace<span style="color:#bbb">
</span></code></pre></div><p><code>remove-container.yml</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#998;font-style:italic">#@ load(&#34;@ytt:overlay&#34;, &#34;overlay&#34;)</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#@overlay/match by=overlay.all, expects=&#34;1+&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#555">---</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">template</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">containers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">#@overlay/match by=&#34;name&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">#@overlay/remove</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- <span style="color:#000080">name</span>:<span style="color:#bbb"> </span>to-be-removed<span style="color:#bbb">
</span></code></pre></div><p><code>add-container.yml</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#998;font-style:italic">#@ load(&#34;@ytt:overlay&#34;, &#34;overlay&#34;)</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#@overlay/match by=overlay.all, expects=&#34;1+&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#555">---</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">template</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">containers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">#@overlay/append</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- <span style="color:#000080">name</span>:<span style="color:#bbb"> </span>appended-container<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#000080">image</span>:<span style="color:#bbb"> </span>image:1.2.3<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#000080">ports</span>:<span style="color:#bbb">
</span><span style="color:#bbb">          </span>- <span style="color:#000080">containerPort</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">#@ data.values.appended_container_port</span><span style="color:#bbb">
</span></code></pre></div><p><code>prod-values.yml</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#998;font-style:italic">#@data/values</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#555">---</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">deployment_name</span>:<span style="color:#bbb"> </span><span style="color:#099">3</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">replicas</span>:<span style="color:#bbb"> </span><span style="color:#099">3</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#@overlay/match missing_ok=True</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">appended_container_port</span>:<span style="color:#bbb"> </span><span style="color:#099">8080</span><span style="color:#bbb">
</span></code></pre></div><p>This example demonstrates a number of overlay capabilities:</p>
<ol>
<li>Appending configuration via <code>add-namespace.yml</code> and <code>add-container.yml</code></li>
<li>Removing configuration via <code>remove-container.yml</code></li>
<li>Extending and updating data values via <code>prod-values.yml</code></li>
</ol>
<p>Use the <a href="/ytt/#gist:https://gist.github.com/aaronshurley/b6868b76e25fcb24aedde42f522734af">ytt playground to play with this
example</a>.</p>
<p>Pros:</p>
<ul>
<li>Has more functionality</li>
<li>Doesnât change the source</li>
<li>Programmatic capabilities (this wasn&rsquo;t demonstrated here, see
<a href="/ytt/docs/latest/lang-ref-ytt-overlay/#programmatic-access">example</a>)</li>
</ul>
<p>Cons:</p>
<ul>
<li>Added complexity</li>
</ul>
<h1 id="if-you-want-to-learn-more">If you want to learn more&hellip; <a href="#if-you-want-to-learn-more" class="section-link">Â¶</a></h1><p>Check out the <a href="/ytt/#example:example-hello-world">Getting Started
tutorial</a> on the ytt website
for a detailed introduction to ytt.</p>

          </div>
        </div>
      </div>
    </main>
    <footer>
	<div class="wrapper footer-links">
		<div class="clearfix">
			<ul class="left-links">
				<li><a href="https://twitter.com/carvel_dev"><img src="/img/twitter.png" />Twitter</a></li>
				<li><a href="https://github.com/vmware-tanzu/carvel.dev"><img src="/img/github.svg" />Github</a></li>
				<li><a href="https://kubernetes.slack.com/archives/CH8KCCKA5">
					<img src="/img/slack.png" />
					<span class="desktop">#carvel in Kubernetes Slack</span>
					<span class="mobile">Slack</span>
				</a></li>
			</ul>
			<div class="right-links">
				<a href="/"> <img src="/img/logo.svg" /></a>
			</div>
		</div>
		<div class="bottom-links">
			<p class="copywrite">&copy; 2021 Carvel Authors. <a href="http://vmware.github.io/">A VMware-backed project. <img src="/img/vm-logo.svg" /></a></p>
		</div>
	</div>
</footer>

    
    
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
      <script type="text/javascript">
        docsearch({
          apiKey: '582b1408d7a3fe145c0f84f48ca03755',
          indexName: 'carvel',
          inputSelector: '.docsearch-input',
          algoliaOptions: {'facetFilters': ["tags:ytt"], hitsPerPage: 9},
          debug: false 
        });
      </script>
    
  </body>
</html>
